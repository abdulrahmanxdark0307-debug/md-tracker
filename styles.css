:root{
  --bg1:#0f2027; --bg2:#203a43; --bg3:#2c5364;
  --card: rgba(255,255,255,0.03);
  --text: #dbe7ff;
  --muted: #9aa4b2;
  --accent1:#7c5cff; --accent2:#33c2ff;
  --good:#23c46b; --warn:#f0b429; --bad:#ff6b6b; --empty:#101418;
  --panel-pad:18px;
  --transition: 220ms;
  --bg-opacity: 1;
  --card-opacity: 1;
  --input-bg: rgba(255,255,255,0.05);
  --input-border: rgba(255,255,255,0.1);
  --dropdown-bg: rgba(30, 41, 59, 0.9);
  --dropdown-border: rgba(255,255,255,0.1);
  --dropdown-hover: rgba(255,255,255,0.08);
}

[data-theme="blue"] {
  --bg1: #0a1929; --bg2: #1a3658; --bg3: #2a4b7c;
  --input-bg: rgba(255,255,255,0.06);
  --input-border: rgba(255,255,255,0.12);
  --dropdown-bg: rgba(26, 54, 93, 0.9);
  --dropdown-border: rgba(255,255,255,0.15);
  --dropdown-hover: rgba(255,255,255,0.1);
}

[data-theme="green"] {
  --bg1: #0d2615; --bg2: #1a472a; --bg3: #276845;
  --input-bg: rgba(255,255,255,0.05);
  --input-border: rgba(255,255,255,0.1);
  --dropdown-bg: rgba(26, 71, 42, 0.9);
  --dropdown-border: rgba(255,255,255,0.1);
  --dropdown-hover: rgba(255,255,255,0.08);
}

[data-theme="purple"] {
  --bg1: #1a0d2e; --bg2: #2d1a4c; --bg3: #45277a;
  --input-bg: rgba(255,255,255,0.05);
  --input-border: rgba(255,255,255,0.1);
  --dropdown-bg: rgba(45, 26, 76, 0.9);
  --dropdown-border: rgba(255,255,255,0.1);
  --dropdown-hover: rgba(255,255,255,0.08);
}

*{box-sizing:border-box}
html,body{min-height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(135deg, 
  var(--bg1), 
  var(--bg2), 
  var(--bg3));color:var(--text);background-attachment:fixed}
.app{max-width:1400px;margin:0 auto;padding:18px}
.tabs{display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap}
.tab{padding:10px 14px;border-radius:10px;background:rgba(255,255,255,0.02);cursor:pointer;border:1px solid rgba(255,255,255,0.03);font-weight:600;transition:background var(--transition),transform var(--transition);font-size:14px}
.tab.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041023;transform:translateY(-2px)}
.panels{position:relative;min-height:500px}
.panel{position:absolute;inset:0;opacity:0;transform:translateY(6px);pointer-events:none;padding:6px;transition:opacity .28s ease, transform .28s ease}
.panel.show{opacity:1;transform:translateY(0);pointer-events:auto}
.session-row{display:flex;gap:8px;align-items:center;margin-bottom:10px;flex-wrap:wrap}
.session-select{background:var(--input-bg);border:1px solid var(--input-border);color:inherit;padding:10px;border-radius:10px;min-width:240px}
.btn{background:linear-gradient(180deg,var(--accent1),var(--accent2));border:none;color:#041023;padding:9px 12px;border-radius:10px;font-weight:700;cursor:pointer;transition:all var(--transition)}
.btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(124,92,255,0.3)}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer;transition:all var(--transition)}
.btn-ghost:hover{background:rgba(255,255,255,0.05);transform:translateY(-1px)}
.btn-warning{background:linear-gradient(180deg,var(--warn),#d89e00);color:#041023}
.input-panel{display:flex;gap:12px;align-items:center;background:var(--card);padding:var(--panel-pad);border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 24px rgba(2,6,23,0.4)}
.group{display:flex;flex-direction:column;gap:6px;min-width:150px;flex:1}
select{background:var(--input-bg);border:1px solid var(--input-border);color:inherit;padding:10px;border-radius:10px}
input{background:var(--input-bg);border:1px solid var(--input-border);padding:10px;border-radius:10px;color:inherit}
.add-deck{background:transparent;border:1px dashed rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer}
.cols{display:grid;grid-template-columns:1fr 480px;gap:18px;margin-top:14px}
.card{background: rgba(255,255,255, calc(0.02 * var(--card-opacity)));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,0.03);text-align:center;font-size:14px}
th{background:rgba(255,255,255,0.02);font-weight:700;color:#cfe6ff}
.small{font-size:13px;color:var(--muted)}
.matrix table{width:100%;border-collapse:collapse}
.matrix th,.matrix td{padding:6px;border:1px solid rgba(255,255,255,0.03)}
.matrix .cell{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:8px;border-radius:6px;font-weight:700}
.matrix .pct{font-size:14px}
.matrix .wl{font-size:12px;opacity:0.95}
.meta-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.meta-grid table{width:100%}
.footer-note{margin-top:10px;color:var(--muted);font-size:13px}
.alert-text{color:var(--bad);font-weight:700;margin-top:8px}
.sidebar{padding:12px}
#pointsChart{max-height:200px;width:100%!important}
.chart-container{position:relative;height:200px;width:100%;overflow:hidden}
.matrix-container{max-height:400px;overflow:auto}
.matrix table{min-width:auto;table-layout:fixed}
.matrix th,.matrix td{min-width:80px;max-width:120px;word-wrap:break-word}
.deck-perf-container{max-height:none;overflow:visible}
#deckPerfTable{width:100%}
#deckPerfTable th:nth-child(1){width:25%}
#deckPerfTable th:nth-child(2){width:12%}
#deckPerfTable th:nth-child(3){width:12%}
#deckPerfTable th:nth-child(4){width:15%}
#deckPerfTable th:nth-child(5){width:15%}
#deckPerfTable th:nth-child(6){width:15%}
.editable-points{background:transparent;border:1px solid transparent;border-radius:4px;padding:4px;width:60px;text-align:center;transition:all 0.2s}
.editable-points:hover{border-color:var(--accent1);background:rgba(124,92,255,0.1)}
.editable-points:focus{outline:none;border-color:var(--accent1);background:rgba(124,92,255,0.15)}
.settings-group{margin-bottom:20px}
.settings-label{display:flex;justify-content:space-between;margin-bottom:8px}
.settings-slider{width:100%;height:6px;border-radius:3px;background:rgba(255,255,255,0.1);outline:none;-webkit-appearance:none}
.settings-slider::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent1);cursor:pointer}
.settings-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--accent1);cursor:pointer;border:none}
.theme-options{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;margin-top:10px}
.theme-option{padding:12px;border-radius:8px;text-align:center;cursor:pointer;border:2px solid transparent;transition:all var(--transition);background:rgba(255,255,255,0.05)}
.theme-option:hover{background:rgba(255,255,255,0.08)}
.theme-option.active{border-color:var(--accent1);background:rgba(124,92,255,0.1)}
.theme-preview{width:100%;height:40px;border-radius:4px;margin-bottom:8px}
.formula-options{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
.formula-option{padding:16px;border-radius:8px;text-align:center;cursor:pointer;border:2px solid transparent;transition:all var(--transition);background:rgba(255,255,255,0.05)}
.formula-option:hover{background:rgba(255,255,255,0.08)}
.formula-option.active{border-color:var(--accent1);background:rgba(124,92,255,0.1)}
.formula-title{font-weight:700;margin-bottom:8px;font-size:16px}
.formula-desc{font-size:12px;color:var(--muted);line-height:1.4}
.calc-section{margin-bottom:24px}
.calc-title{font-size:18px;font-weight:700;margin-bottom:16px;color:var(--text);border-bottom:1px solid rgba(255,255,255,0.1);padding-bottom:8px}
.calc-inputs{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-bottom:16px}
.calc-input-group{display:flex;flex-direction:column;gap:6px}
.calc-results{background:rgba(255,255,255,0.02);border-radius:8px;padding:16px;border:1px solid rgba(255,255,255,0.05)}
.calc-result-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)}
.calc-result-item:last-child{border-bottom:none}
.calc-result-label{color:var(--muted)}
.calc-result-value{font-weight:600}
.simulator-controls{display:flex;gap:16px;margin-bottom:20px;flex-wrap:wrap;align-items:flex-end}
.simulator-result{text-align:center;margin:20px 0}
.result-display{font-size:32px;font-weight:bold;color:var(--accent1)}
.deck-combo-inputs{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.input-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.textarea-container{position:relative}
.quick-add-panel{background:rgba(255,255,255,0.05);border-radius:8px;padding:12px;margin-top:8px;border:1px solid rgba(255,255,255,0.1)}
.quick-add-inputs{display:grid;grid-template-columns:1fr 1fr auto;gap:8px;align-items:end}
.quick-add-btn{background:var(--accent1);border:none;color:white;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:12px}
.quick-add-btn:hover{background:var(--accent2)}
.card-list{max-height:200px;overflow-y:auto;margin-top:8px;background:rgba(255,255,255,0.02);border-radius:6px;padding:8px}
.card-item{display:flex;justify-content:space-between;align-items:center;padding:4px 8px;border-bottom:1px solid rgba(255,255,255,0.05)}
.card-item:last-child{border-bottom:none}
.card-actions{display:flex;gap:4px}
.card-action-btn{background:none;border:none;color:var(--muted);cursor:pointer;font-size:12px;padding:2px 6px}
.card-action-btn:hover{color:var(--text)}
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity 0.3s ease}
.modal-overlay.active{opacity:1;pointer-events:auto}
.modal-dialog{background:var(--bg2);border-radius:12px;padding:24px;width:90%;max-width:400px;border:1px solid rgba(255,255,255,0.1);box-shadow:0 10px 30px rgba(0,0,0,0.5);transform:translateY(20px);transition:transform 0.3s ease}
.modal-overlay.active .modal-dialog{transform:translateY(0)}
.modal-header{margin-bottom:16px}
.modal-title{font-size:18px;font-weight:700;margin:0;color:var(--text)}
.modal-body{margin-bottom:20px}
.modal-input{width:100%;padding:12px;border-radius:8px;background:var(--input-bg);border:1px solid var(--input-border);color:var(--text);font-size:16px}
.modal-input:focus{outline:none;border-color:var(--accent1)}
.modal-footer{display:flex;justify-content:flex-end;gap:10px}
.prediction-card{background:var(--card);padding:16px;border-radius:10px;margin-bottom:16px;border-left:4px solid var(--accent1)}
.comparison-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.analysis-section{margin-bottom:24px}
.stat-card{background:rgba(255,255,255,0.02);padding:16px;border-radius:8px;text-align:center;border:1px solid rgba(255,255,255,0.03)}
.stat-value{font-size:24px;font-weight:700;color:var(--accent2);margin-bottom:8px}
.stat-label{font-size:14px;color:var(--muted)}
.progress-bar{height:8px;background:rgba(255,255,255,0.05);border-radius:4px;overflow:hidden;margin-top:8px}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent1),var(--accent2));border-radius:4px;transition:width 0.5s ease}
.win-probability{font-size:32px;font-weight:700;text-align:center;margin:16px 0;background:linear-gradient(90deg,var(--accent1),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.confidence-meter{height:10px;background:rgba(255,255,255,0.1);border-radius:5px;margin:12px 0;overflow:hidden}
.confidence-fill{height:100%;background:linear-gradient(90deg,var(--good),var(--warn));border-radius:5px}
.matchup-details{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
.matchup-stat{text-align:center;padding:12px;background:rgba(255,255,255,0.02);border-radius:8px}
.session-stats{display:flex;gap:16px;margin-top:8px}
.session-stat{display:flex;flex-direction:column;align-items:center;padding:8px;background:rgba(255,255,255,0.02);border-radius:6px;min-width:80px}
.session-stat-value{font-weight:700;font-size:14px}
.session-stat-label{font-size:11px;color:var(--muted);margin-top:4px}
.optional-section{margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,0.05)}
.optional-label{font-size:12px;color:var(--muted);margin-bottom:4px}
.view-controls{display:flex;gap:8px;margin-bottom:12px}
.view-control-btn{padding:6px 12px;border-radius:6px;background:var(--input-bg);border:1px solid var(--input-border);color:var(--text);cursor:pointer;font-size:12px;transition:all var(--transition)}
.view-control-btn.active{background:var(--accent1);color:#041023}
.circle-selector{margin-bottom:12px}
.deck-list-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}
.deck-list-card{background:var(--card);padding:16px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
.deck-list-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.deck-list-image{width:100%;border-radius:8px;margin-bottom:12px;background:var(--input-bg);min-height:200px;display:flex;align-items:center;justify-content:center;color:var(--muted)}
.deck-list-stats{display:flex;gap:12px}
.deck-list-stat{display:flex;flex-direction:column;align-items:center;flex:1}
.deck-list-stat-value{font-weight:700;font-size:16px}
.deck-list-stat-label{font-size:12px;color:var(--muted)}
.user-profile{display:flex;align-items:center;gap:8px;margin-bottom:16px}
.user-avatar{width:40px;height:40px;border-radius:50%;background:var(--accent1);display:flex;align-items:center;justify-content:center;font-weight:700}
.user-info{display:flex;flex-direction:column}
.user-name{font-weight:600}
.user-rank{font-size:12px;color:var(--muted)}
.login-btn{display:flex;align-items:center;gap:8px;padding:10px 16px;background:#5865F2;color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all var(--transition)}
.login-btn:hover{background:#4752C4;transform:translateY(-1px)}
.login-modal{max-width:400px}
.login-tabs{display:flex;gap:8px;margin-bottom:16px}
.login-tab{padding:10px 16px;border-radius:8px;background:rgba(255,255,255,0.05);cursor:pointer;transition:all var(--transition);flex:1;text-align:center}
.login-tab.active{background:var(--accent1);color:#041023;font-weight:600}
.best-decks-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-top:16px}
.best-deck-card{background:var(--card);padding:16px;border-radius:8px;text-align:center;border:1px solid rgba(255,255,255,0.03)}
.best-deck-name{font-weight:700;margin-bottom:8px}
.best-deck-wr{font-size:24px;font-weight:700;color:var(--accent2);margin-bottom:4px}
.best-deck-matches{font-size:12px;color:var(--muted)}
.delete-btn{background:none;border:none;color:var(--bad);cursor:pointer;padding:4px 8px;border-radius:4px;transition:all var(--transition)}
.delete-btn:hover{background:var(--bad);color:white}
@media (max-width:980px){ 
  .cols{grid-template-columns:1fr} 
  .input-panel{flex-direction:column;align-items:stretch} 
  .session-select{width:100%} 
  .comparison-grid{grid-template-columns:1fr}
  .matchup-details{grid-template-columns:1fr}
  .theme-options{grid-template-columns:repeat(2,1fr)}
  .formula-options{grid-template-columns:1fr}
  .calc-inputs{grid-template-columns:1fr}
  .deck-combo-inputs{grid-template-columns:1fr}
  .simulator-controls{flex-direction:column}
  .quick-add-inputs{grid-template-columns:1fr}
  .session-stats{flex-wrap:wrap}
  .deck-list-container{grid-template-columns:1fr}
  .best-decks-container{grid-template-columns:repeat(2,1fr)}
}
@media (max-width:600px){ 
  .best-decks-container{grid-template-columns:1fr}
}